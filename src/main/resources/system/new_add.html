<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>新闻上传</title>

<link rel="stylesheet" href="layui.css">
<link rel="stylesheet" href="layui.css" media="all">
<script src="layui.js" type="text/javascript"></script>
<style type="text/css">
.layui-main {
	width: 500px;
	/* border: 1px solid rgb(0, 150, 135); */
	padding: 10px;
}

.layui-title {
	width: 100%;
	height: 50px;
	line-height: 50px;
	text-align: center;
	background: rgb(0, 150, 136);
	font-size: 18px;
	color: white;
	margin-bottom: 10px;
}

</style>

</head>
<body>
		
	<!-- <div class="layui-input-block news">
		<a class="layui-btn"  href="newController/selectNew">查看新闻</a>
	</div> -->
	
	<div class="layui-main">
		<div class="layui-title">新闻上传</div>
		<form class="layui-form" action="newController/insertNew" method="post" enctype="multipart/form-data">
			<div class="layui-form-item">
				<label class="layui-form-label">标题</label>
				<div class="layui-input-block">
					<input type="text" name="newTitle" required lay-verify="required"
						placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
			</div>

			<div class="layui-form-item">
				<label class="layui-form-label">类型:</label>
				<div class="layui-input-block">
					<select name="newType" lay-verify="required">
						<option value=""></option>
						<option value="新闻">新闻</option>
						<option value="政治">政治</option>
						<option value="历史">历史</option>
						<option value="学生">学生</option>
					</select>
				</div>
			</div>

			<div class="layui-form-item">
				<label class="layui-form-label">简介: </label>
				<div class="layui-input-block">
					<input type="text" name="newJj" required lay-verify="required"
						placeholder="请输入新闻简介" autocomplete="off" class="layui-input">
				</div>
			</div>

			<div class="layui-form-item">
				<label class="layui-form-label">时间:</label>
				<div class="layui-input-block">
					<input class="layui-input" name="newTime" id="test2" type="text"
						placeholder="yyyy-MM-dd">
				</div>
			</div>

			<div class="layui-form-item">
				<label class="layui-form-label"> 作者: </label>
				<div class="layui-input-block">
					<input type="text" name="newAuthor" required lay-verify="required"
						placeholder="请输入作者" autocomplete="off" class="layui-input">
				</div>
			</div>

			<div class="layui-form-item">
				<label class="layui-form-label"> 附件</label>
				<input type="file" name="file">
				<button type="button" name="remarks" class="layui-btn" id="test1">
					<i class="layui-icon">&#xe67c;</i>添加附件
				</button>
			</div>

			<div class="layui-form-item">
				<div class="layui-input-block">
					<button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
					<button type="reset" class="layui-btn layui-btn-primary">重置</button>
				</div>
			</div>
		</form>
		
	</div>

	<script>
		//Demo
		layui.use('form', function() {
			var form = layui.form;

			//监听提交
			form.on('submit(formDemo)', function(data) {
				//layer.msg(JSON.stringify(data.field));
				$(".layui-form").submit();
				return false;
			});
		});

		//上传附件
		layui.use('upload', function() {
			var upload = layui.upload;
			//执行实例
			var uploadInst = upload.render({
				elem : '#test1' //绑定元素
				,
				url : 'newUploadController/newUpload' //上传接口
				,
				accept : 'file'//上传类型
				,
				done : function(res, index, upload) {
					//上传完毕回调
					alert("成功");
				},
				error : function() {
					//请求异常回调
					alert("失败");
				}

			});
		});

		layui.use('laydate', function() {
			var laydate = layui.laydate;

			//常规用法
			laydate.render({
				elem : '#test2'
			});
		})
	</script>
</body>
</html>